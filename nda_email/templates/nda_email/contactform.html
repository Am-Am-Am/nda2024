<form
        id="cart_modal_form"
        action="{% url 'cart_submit' %}"
        method="post"
        enctype="multipart/form-data"
        hx-post="{% url 'cart_submit' %}"
        hx-target="#cart_modal_form"
        hx-swap="outerHTML"
>

    <script src="https://smartcaptcha.yandexcloud.net/captcha.js?render=onload&onload=onloadFunction" defer></script>
    {% csrf_token %}
    <div>
        {{ contact_form.name }}
    </div>
    <div>
        {{ contact_form.phone_number }}
        {% if contact_form.phone_number.errors %}
            <span style="color: #FF4343">
                {{ contact_form.phone_number.errors }}
            </span>
        {% endif %}
    </div>
    <div>
        {{ contact_form.email }}
            {% if contact_form.email.errors %}
                <span style="color: #FF4343">
                    {{ contact_form.email.errors }}
                </span>
            {% endif %}
    </div>
    <div>
        {{ contact_form.message }}
            {% if contact_form.message.errors %}
                <span style="color: #FF4343">
                    {{ contact_form.errors.message }}
                </span>
            {% endif %}
    </div>
    <div>
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">
                        <span style="color: #FF4343">
                        {{ message|safe }}
                        </span>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
    <div
        id="captcha-container"
    >
    </div>
</form>

{# todo: не работает #}
<script>
{#const contactModalForm22 = document.getElementById('cart_modal_form');#}
function onloadFunction() {
  if (!window.smartCaptcha) {
    return;
  }

  window.smartCaptcha.render('captcha-container', {
    sitekey: 'ysc1_sxny6cNZmnvhyJKrojDDLNxj0nvkGnTleldHzqEo9d9475ca',
    invisible: true, // Сделать капчу невидимой
    callback: callback,
  });
}

function callback(token) {
    console.log('callback', token)

}

function handleSubmit(event) {
    console.log('handleSubmit', event)


}
</script>